{"componentChunkName":"component---src-templates-post-template-tsx","path":"/posts/javascript-optimize-2","result":{"data":{"site":{"siteMetadata":{"title":"June"}},"markdownRemark":{"id":"d1d63536-313b-503b-9196-965195212d27","excerpt":"1장에 이어서 2장도 바로 진행하겠습니다~ 2. 데이터 접근 데이터는 총 4개의 형식으로 이루어집니다. 리터럴 값 (Number, boolean, Object, Array, Function, Regex, null, undefined…","html":"<p>1장에 이어서 2장도 바로 진행하겠습니다~</p>\n<h2 id=\"2-데이터-접근\" style=\"position:relative;\">2. 데이터 접근<a href=\"#2-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%91%EA%B7%BC\" aria-label=\"2 데이터 접근 permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>데이터는 총 4개의 형식으로 이루어집니다.</p>\n<ol>\n<li>리터럴 값 (Number, boolean, Object, Array, Function, Regex, null, undefined)</li>\n<li>변수</li>\n<li>배열 항목</li>\n<li>객체 맴버</li>\n</ol>\n<p>각 데이터 저장 위치와 브라우저마다 I/O 시간이 모두 다릅니다.</p>\n<h3 id=\"2-1-스코프-관리\" style=\"position:relative;\">2-1. 스코프 관리<a href=\"#2-1-%EC%8A%A4%EC%BD%94%ED%94%84-%EA%B4%80%EB%A6%AC\" aria-label=\"2 1 스코프 관리 permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>자바스크립트의 함수는 객체 (Function의 인스턴스) 입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span> num2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> sum <span class=\"token operator\">=</span> num1 <span class=\"token operator\">+</span> num2<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> sum<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>간단한 add 함수가 있을 때, add 함수의 scope chain 입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/55129c19ed8cd4fa8b18a14547ef9461/e9b2c/scope1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB0qDNkD//xAAYEAACAwAAAAAAAAAAAAAAAAAAAQIRMf/aAAgBAQABBQJ61Kj/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAARAhMf/aAAgBAQAGPwLSnH//xAAZEAACAwEAAAAAAAAAAAAAAAAAEQEhMXH/2gAIAQEAAT8hhp+FZMy1D0//2gAMAwEAAgADAAAAEHAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAQADAQAAAAAAAAAAAAAAAREAIXEx/9oACAEBAAE/EHZiST53GlYu1Q1gAFYL3P/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"scope1\"\n        title=\"scope1\"\n        src=\"/static/55129c19ed8cd4fa8b18a14547ef9461/7cc5e/scope1.jpg\"\n        srcset=\"/static/55129c19ed8cd4fa8b18a14547ef9461/e439a/scope1.jpg 120w,\n/static/55129c19ed8cd4fa8b18a14547ef9461/09b79/scope1.jpg 240w,\n/static/55129c19ed8cd4fa8b18a14547ef9461/7cc5e/scope1.jpg 480w,\n/static/55129c19ed8cd4fa8b18a14547ef9461/80e3c/scope1.jpg 720w,\n/static/55129c19ed8cd4fa8b18a14547ef9461/6a068/scope1.jpg 960w,\n/static/55129c19ed8cd4fa8b18a14547ef9461/e9b2c/scope1.jpg 1758w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>이 add 함수를 실행할 때의 scope chain의 변화 입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> total <span class=\"token operator\">=</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/edc65000570fb1b7c79a9dfc4428e94e/6eed6/scope2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.83333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAehHVHNQw//EABkQAQADAQEAAAAAAAAAAAAAAAECERIAIv/aAAgBAQABBQJk6kuYPl5LAo//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAABBQAAAAAAAAAAAAAAAABRABESICH/2gAIAQEABj8CaOFCv//EABkQAAMAAwAAAAAAAAAAAAAAAAABERAhkf/aAAgBAQABPyGl0CraKLu4oYmKkj//2gAMAwEAAgADAAAAEGg//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8QR//EABsQAQACAgMAAAAAAAAAAAAAAAEAETFRIUFh/9oACAEBAAE/EEoYFDsjFCjkXcZNsuV9gKl6VOoZuQ3P/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"scope2\"\n        title=\"scope2\"\n        src=\"/static/edc65000570fb1b7c79a9dfc4428e94e/7cc5e/scope2.jpg\"\n        srcset=\"/static/edc65000570fb1b7c79a9dfc4428e94e/e439a/scope2.jpg 120w,\n/static/edc65000570fb1b7c79a9dfc4428e94e/09b79/scope2.jpg 240w,\n/static/edc65000570fb1b7c79a9dfc4428e94e/7cc5e/scope2.jpg 480w,\n/static/edc65000570fb1b7c79a9dfc4428e94e/80e3c/scope2.jpg 720w,\n/static/edc65000570fb1b7c79a9dfc4428e94e/6a068/scope2.jpg 960w,\n/static/edc65000570fb1b7c79a9dfc4428e94e/6eed6/scope2.jpg 1790w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Activeation object는 생성이 될때마다 만들어졌다 파괴되었다를 반복합니다. 변수를 할당하거나 계산할 때, 등등에서 자신의 값에 맞는 변수를 찾기 위해 scope chain을 검색합니다.\nActivation object에 값이 있다면 할당을, 없으면 Global object에서 다시 검색을 진행합니다. 이 검색의 과정이 복잡할수록 성능이 떨어집니다.\n성능 개선을 위해선 최대한 지역 변수, Global object에 있는 값들을 사용해야 합니다.</p>\n<p>반복되는 전역객체는 할당 후 사용을 해야합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">,</span>\nlink <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ndocument<span class=\"token punctuation\">.</span>getElementById<span class=\"token operator\">...</span></code></pre></div>\n<p>가 아닌</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> doc <span class=\"token operator\">=</span> document<span class=\"token punctuation\">,</span>\nbd <span class=\"token operator\">=</span> doc<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">,</span>\nlink <span class=\"token operator\">=</span> doc<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span>\n\ndoc<span class=\"token punctuation\">.</span>getElementById<span class=\"token operator\">...</span></code></pre></div>\n<p>와 같은 작업이 필요합니다. 이 예제는 매우 간단하지만 수십, 수백번 전역 객체에 접근을 매번 새로한다고 생각하면 끔찍하네요.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">assignEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> id <span class=\"token operator\">=</span> <span class=\"token string\">'xdi9592'</span><span class=\"token punctuation\">;</span>\n\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'save-btn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">saveDocument</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>클로저를 생각해봅시다. 함수안에 함수가 존재하네요. 이런 경우에는 scope chain을 공유하게 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cec4d1c4967727bb4ce3a32b56703d7b/d2602/closure1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHRS8BcmF//xAAYEAADAQEAAAAAAAAAAAAAAAABAhEhQf/aAAgBAQABBQKwFsQ0cYULg//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAABAhEhIP/aAAgBAQAGPwKKpmG8f//EABoQAAMAAwEAAAAAAAAAAAAAAAABESExQVH/2gAIAQEAAT8h2wq4jNbNRj8qunCHRLk/T//aAAwDAQACAAMAAAAQU+//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPxCI/8QAGRABAQEBAQEAAAAAAAAAAAAAAREAITFx/9oACAEBAAE/EJ5gC0D7loqCzUKUFSZ4S+GRFjbcFtWnf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"closure1\"\n        title=\"closure1\"\n        src=\"/static/cec4d1c4967727bb4ce3a32b56703d7b/7cc5e/closure1.jpg\"\n        srcset=\"/static/cec4d1c4967727bb4ce3a32b56703d7b/e439a/closure1.jpg 120w,\n/static/cec4d1c4967727bb4ce3a32b56703d7b/09b79/closure1.jpg 240w,\n/static/cec4d1c4967727bb4ce3a32b56703d7b/7cc5e/closure1.jpg 480w,\n/static/cec4d1c4967727bb4ce3a32b56703d7b/80e3c/closure1.jpg 720w,\n/static/cec4d1c4967727bb4ce3a32b56703d7b/6a068/closure1.jpg 960w,\n/static/cec4d1c4967727bb4ce3a32b56703d7b/d2602/closure1.jpg 4032w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>실행 당시에 생성되는 Activation object를 closure도 공유를 하는데, 함수인 closure가 생성될 때에는 Activation object가\n생성이 안될까요? 물론 생성됩니다. 그렇기 때문에 scope chain이 또 한번 변경이 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2faa21858524d7eda2f064220a4fb365/5d96e/closure2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.16666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAgADBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHoHQEoQ//EABgQAQADAQAAAAAAAAAAAAAAAAEAAhES/9oACAEBAAEFAtemzzV0cjXQMn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAADAQEAAAAAAAAAAAAAAAAAASExEP/aAAgBAQAGPwJ1Gopnf//EABoQAAMBAQEBAAAAAAAAAAAAAAABESFBMVH/2gAIAQEAAT8hcDP50RR6D9CbvBPUViYrCeU//9oADAMBAAIAAwAAABBk7//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/EIj/xAAaEAEBAQEBAQEAAAAAAAAAAAABEQAhMXFR/9oACAEBAAE/EPFCMrj7hUCeo8fnctbB1EmSv6BhXE5kacudYNb5N//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"closure2\"\n        title=\"closure2\"\n        src=\"/static/2faa21858524d7eda2f064220a4fb365/7cc5e/closure2.jpg\"\n        srcset=\"/static/2faa21858524d7eda2f064220a4fb365/e439a/closure2.jpg 120w,\n/static/2faa21858524d7eda2f064220a4fb365/09b79/closure2.jpg 240w,\n/static/2faa21858524d7eda2f064220a4fb365/7cc5e/closure2.jpg 480w,\n/static/2faa21858524d7eda2f064220a4fb365/80e3c/closure2.jpg 720w,\n/static/2faa21858524d7eda2f064220a4fb365/6a068/closure2.jpg 960w,\n/static/2faa21858524d7eda2f064220a4fb365/5d96e/closure2.jpg 1882w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>여기서 발생하는 성능문제가 있죠. 우선순위가 0, 1인 scope chain에서 값을 찾지 못했을 경우인데요, 만약 closure가 여러겹으로 있다고 한다면\n상당한 성능 저하로 이어지게 됩니다.</p>\n<h3 id=\"2-2-객체-멤버\" style=\"position:relative;\">2-2. 객체 멤버<a href=\"#2-2-%EA%B0%9D%EC%B2%B4-%EB%A9%A4%EB%B2%84\" aria-label=\"2 2 객체 멤버 permalink\" class=\"autolink-headers-- after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>객체 멤버 접근은 리터럴, 변수, 배열 접근보다 느립니다. 그 이유를 알아봅시다.</p>\n<p>자바스크립트의 객체는 프로토타입에 기반합니다. 프로토타입은 다른 객체의 기반이 되는 객체로, 새 객체가 가져야 할 멤버를 정의 및 구현합니다.\n프로토타입 객체는 해당 객체의 모든 인스턴스 사이에서 공유됩니다.</p>\n<p>객체는 내부 속성을 통해 자신의 프로토타입에 묶이며, 브라우저들은 이 속성을 <code class=\"language-text\">__proto__</code>라는 이름으로 노출합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> book <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  title<span class=\"token operator\">:</span> <span class=\"token string\">'High Performance Javascript'</span><span class=\"token punctuation\">,</span>\n  publisher<span class=\"token operator\">:</span> <span class=\"token string\">'Junseok'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>book<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [object Object]</span></code></pre></div>\n<p>prototype 또한 객체이기 때문에 prototype에 대한 키가 존재합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0a2ec293cd77b8bcdb6800b1d114af05/5ed7a/prototype1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHSrkTg/8QAGBAAAwEBAAAAAAAAAAAAAAAAABESAgP/2gAIAQEAAQUC6Ubts//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAEFAAAAAAAAAAAAAAAAAAABEBEhIv/aAAgBAQAGPwLKlS3/xAAZEAADAAMAAAAAAAAAAAAAAAABESEAEDH/2gAIAQEAAT8hYBHIG4q0/9oADAMBAAIAAwAAABAIP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQADAQEAAAAAAAAAAAAAAAEAESFBof/aAAgBAQABPxDCzFvQvyUWHIliy52f/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype1\"\n        title=\"prototype1\"\n        src=\"/static/0a2ec293cd77b8bcdb6800b1d114af05/7cc5e/prototype1.jpg\"\n        srcset=\"/static/0a2ec293cd77b8bcdb6800b1d114af05/e439a/prototype1.jpg 120w,\n/static/0a2ec293cd77b8bcdb6800b1d114af05/09b79/prototype1.jpg 240w,\n/static/0a2ec293cd77b8bcdb6800b1d114af05/7cc5e/prototype1.jpg 480w,\n/static/0a2ec293cd77b8bcdb6800b1d114af05/80e3c/prototype1.jpg 720w,\n/static/0a2ec293cd77b8bcdb6800b1d114af05/6a068/prototype1.jpg 960w,\n/static/0a2ec293cd77b8bcdb6800b1d114af05/5ed7a/prototype1.jpg 1832w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>prototype 구조는 다음과 같으며 title, publisher를 제외하는 prototype에 기능이 포함되어 있기 때문에, 위 코드의 toString과 같은 함수는 prototype에 있는 기능을\n사용하게 됩니다. (scope chain을 보면 알 수 있듯이 Activation object에 toString이 있다면 그 기능으로 사용합니다. like overriding)</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Book</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">title<span class=\"token punctuation\">,</span> publisher</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> title<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>publisher <span class=\"token operator\">=</span> publisher<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Book</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayTitle</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> book1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Book</span><span class=\"token punctuation\">(</span><span class=\"token string\">'High performance js 1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'junseok'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> book2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Book</span><span class=\"token punctuation\">(</span><span class=\"token string\">'High performance js 2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'junseok'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>boo1 <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Book</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>boo1 <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n\nbook1<span class=\"token punctuation\">.</span><span class=\"token function\">sayTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'High performance js 1'</span>\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>book1<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [object Object]</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/06af69c4f7ab3769dfcef555c204a483/9ded1/prototype2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHsVUS0H//EABoQAAICAwAAAAAAAAAAAAAAAAERAhASEyL/2gAIAQEAAQUCfW0qMyRiGq//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAIDJB/9oACAEBAAY/AqMX/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAERITFR/9oACAEBAAE/Ia1fcsciLF4a00RYk4iFw//aAAwDAQACAAMAAAAQ89//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPxCI/8QAGxABAQEBAAMBAAAAAAAAAAAAAREAIVFhccH/2gAIAQEAAT8Qe1ETfL68ZLQEady5sI4TEU+Ldb+WQYA+G//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype2\"\n        title=\"prototype2\"\n        src=\"/static/06af69c4f7ab3769dfcef555c204a483/7cc5e/prototype2.jpg\"\n        srcset=\"/static/06af69c4f7ab3769dfcef555c204a483/e439a/prototype2.jpg 120w,\n/static/06af69c4f7ab3769dfcef555c204a483/09b79/prototype2.jpg 240w,\n/static/06af69c4f7ab3769dfcef555c204a483/7cc5e/prototype2.jpg 480w,\n/static/06af69c4f7ab3769dfcef555c204a483/80e3c/prototype2.jpg 720w,\n/static/06af69c4f7ab3769dfcef555c204a483/6a068/prototype2.jpg 960w,\n/static/06af69c4f7ab3769dfcef555c204a483/9ded1/prototype2.jpg 3384w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>코드와 코드에 해당하는 prototype chain 구조입니다. Book 함수의 프로토타입(prototype)은 Book.prototype 이고, Book 인스턴스의 프로토타입(<code class=\"language-text\">__proto__</code>) 또한 Book.prototype 입니다.\n그리고 Book.prototype의 프로토타입 (Book.prototype.prototype)은 Object가 됩니다.</p>\n<p><code class=\"language-text\">물론 관계가 깊어질수록 성능은 저하됩니다.</code></p>\n<p>객체 멤버를 해석하는 작업도 있습니다. <code class=\"language-text\">.</code> 마다 객체 멤버를 해석하는 작업을하기 때문에 window.location.href가 window.location.href.toString()보다 빠릅니다.</p>\n<hr>\n<p>2장도 짧은 정리로 끝났는데, HTML4를 사용하던 때의, 오래된 책이지만 몰랐던 부분이 간간히 나옵니다.\n중요한 부분을 잘 집어서 더 정리해보겠습니다 ^^</p>","frontmatter":{"title":"자바스크립트 성능 최적화 2","date":"May 18, 2017","tags":["javascript","performance"]}}},"pageContext":{"slug":"/posts/javascript-optimize-2","previous":{"fields":{"slug":"/posts/javascript-optimize-3"},"frontmatter":{"title":"자바스크립트 성능 최적화 3"}},"next":{"fields":{"slug":"/posts/javascript-optimize-1"},"frontmatter":{"title":"자바스크립트 성능 최적화 1"}}}},"staticQueryHashes":["1576648375","764694655"]}